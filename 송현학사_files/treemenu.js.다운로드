function CheckTree(e){this.myName=e,this.root=null,this.countAllLevels=true,this.checkFormat="(%n% ëª…)",this.evtProcessed=navigator.userAgent.indexOf("Apple")>-1?"safRtnVal":"returnValue",CheckTree.list[e]=this}function setBoxStates(e,routingDown,countOnly){with(this){if(!this.childNodes)return;e=e||window.event;var elm=e.srcElement||e.target;if(elm&&elm.id&&elm.id.match(/^check-(.*)/)&&!routingDown&&!e[treeObj.evtProcessed]){var refTree=document.getElementById("tree-"+RegExp.$1);refTree&&(refTree.setBoxStates(e,!0,countOnly),e[treeObj.evtProcessed]=!0)}for(var allChecked=!0,boxCount=0,subBoxes=null,thisLevel=this.id.match(/^tree-(.*)/)[1],parBox=document.getElementById("check-"+thisLevel),li=0;li<childNodes.length;li++)for(var tag=0;tag<childNodes[li].childNodes.length;tag++){var child=childNodes[li].childNodes[tag];child&&(child.tagName&&child.type&&child.tagName.match(/^input/i)&&child.type.match(/^checkbox/i)&&(routingDown&&parBox&&elm&&elm.id&&elm.id.match(/^check-/)&&!countOnly&&(child.checked=parBox.checked),allChecked&=child.checked,child.checked&&boxCount++),child.tagName&&child.tagName.match(/^ul/i)&&(!e[treeObj.evtProcessed]||routingDown)&&child.setBoxStates(e,!0,countOnly))}if(routingDown||(e[treeObj.evtProcessed]=!0),parBox&&parBox!=elm&&!countOnly&&(parBox.checked=allChecked),treeObj.countAllLevels){boxCount=0;for(var subBoxes=this.getElementsByTagName("input"),i=0;i<subBoxes.length;i++)if(subBoxes[i].checked&&subBoxes[i].className!='remove_cnt')boxCount++;}var countElm=document.getElementById("count-"+thisLevel);if(countElm){for(;countElm.firstChild;)countElm.removeChild(countElm.firstChild);boxCount&&countElm.appendChild(document.createTextNode(treeObj.checkFormat.replace("%n%",boxCount)))}}}function treeMenuOnload(){for(var e in CheckTree.list)try{CheckTree.list[e].init()}catch(t){}}CheckTree.list=[],CheckTree.prototype.init=function(){with(this){if(!document.getElementById)return;if(root=document.getElementById("tree-"+myName),root){for(var lists=root.getElementsByTagName("ul"),ul=0;ul<lists.length;ul++){lists[ul].style.display="none",lists[ul].treeObj=this,lists[ul].setBoxStates=setBoxStates;var fn=new Function("e","this.setBoxStates(e)");lists[ul].addEventListener&&"Apple Computer, Inc."!=navigator.vendor?lists[ul].addEventListener("click",fn,!1):lists[ul].onclick=fn}root.treeObj=this,root.setBoxStates=setBoxStates,root.addEventListener&&"Apple Computer, Inc."!=navigator.vendor?root.addEventListener("click",new Function("e",myName+".click(e)"),!1):root.onclick=new Function("e",myName+".click(e)"),root.setBoxStates({},!0,!0);for(var nodes=root.getElementsByTagName("li"),li=0;li<nodes.length;li++)nodes[li].id.match(/^show-/)&&(nodes[li].className="last"==nodes[li].className?"plus-last":"plus")}}},CheckTree.prototype.click=function(e){with(this){e=e||window.event;var elm=e.srcElement||e.target;if(!e[evtProcessed]&&elm.id&&elm.id.match(/^check-(.*)/)){var tree=document.getElementById("tree-"+RegExp.$1);tree&&tree.setBoxStates(e,!0,!1)}for(;elm&&!elm.tagName.match(/^(input|ul)/i);){if(elm.id&&elm.id.match(/^show-(.*)/)){var targ=document.getElementById("tree-"+RegExp.$1);if(targ.style){var col="none"==targ.style.display;targ.style.display=col?"block":"none",elm.className=elm.className.replace(col?"plus":"minus",col?"minus":"plus")}break}elm=elm.parentNode}}};var chtOldOL=window.onload;window.onload=function(){chtOldOL&&chtOldOL(),treeMenuOnload()};var checkmenu=new CheckTree("checkmenu");treeMenuOnload();
